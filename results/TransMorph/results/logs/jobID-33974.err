
CondaError: Run 'conda init' before 'conda deactivate'


CondaError: Run 'conda init' before 'conda activate'

####################################
/u/home/fratzke/.local/lib/python3.12/site-packages/timm/models/layers/__init__.py:48: FutureWarning:

Importing from timm.models.layers is deprecated, please import via timm.layers

  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/infer_TransMorph.py", line 10, in <module>
    from models.TransMorph import CONFIGS as CONFIGS_TM
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 21, in <module>
    from timm.models.layers import DropPath, trunc_normal_, to_3tuple
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/timm/models/layers/__init__.py", line 48, in <module>
    warnings.warn(f"Importing from {__name__} is deprecated, please import via timm.layers", FutureWarning)
####################################
####################################
/u/home/fratzke/.local/lib/python3.12/site-packages/torch/functional.py:507: UserWarning:

torch.meshgrid: in an upcoming release, it will be required to pass the indexing argument. (Triggered internally at ../aten/src/ATen/native/TensorShape.cpp:3549.)

  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/infer_TransMorph.py", line 125, in <module>
    main()
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/infer_TransMorph.py", line 29, in main
    model = TransMorph.TransMorph(config)
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 818, in __init__
    self.transformer = SwinTransformer(patch_size=config.patch_size,
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 594, in __init__
    layer = BasicLayer(dim=int(embed_dim * 2 ** i_layer),
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 347, in __init__
    SwinTransformerBlock(
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 191, in __init__
    self.attn = WindowAttention(
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/models/TransMorph.py", line 107, in __init__
    coords = torch.stack(torch.meshgrid([coords_h, coords_w, coords_t]))  # 3, Wh, Ww, Wt
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/torch/functional.py", line 492, in meshgrid
    return _meshgrid(*tensors, indexing=indexing)
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/torch/functional.py", line 507, in _meshgrid
    return _VF.meshgrid(tensors, **kwargs)  # type: ignore[attr-defined]
####################################
Traceback (most recent call last):
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/infer_TransMorph.py", line 125, in <module>
    main()
  File "/vol/miltank/users/fratzke/Documents/atlas-based-registration/models/TransMorph_Transformer_for_Medical_Image_Registration/TransMorph/infer_TransMorph.py", line 30, in main
    best_model = torch.load(model_dir + natsorted(os.listdir(model_dir))[model_idx])['state_dict']
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/torch/serialization.py", line 998, in load
    with _open_file_like(f, 'rb') as opened_file:
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/torch/serialization.py", line 445, in _open_file_like
    return _open_file(name_or_buffer, mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/u/home/fratzke/.local/lib/python3.12/site-packages/torch/serialization.py", line 426, in __init__
    super().__init__(open(name, mode))
                     ^^^^^^^^^^^^^^^^
IsADirectoryError: [Errno 21] Is a directory: 'experiments/TransMorph_mse_1_diffusion_0.02/2025-08-01_01-54-54'
